<div class="form-container">

  <h2>{{ editMode ? 'Editar Publicación' : 'Crear Publicación' }}</h2>

  <input [(ngModel)]="formData.titulo" name="titulo" placeholder="Título" required>

  <textarea [(ngModel)]="formData.contenido" name="contenido" placeholder="Contenido" required></textarea>

  <input [(ngModel)]="formData.autor" name="autor" placeholder="Autor" required>

  <input [(ngModel)]="formData.imagen" name="imagen" placeholder="URL de imagen">

  <input [(ngModel)]="formData.documento" name="documento" placeholder="URL de documento">

  <!-- BOTONES -->
  <button *ngIf="!editMode" (click)="crearPublicacion()">Crear</button>
  <button *ngIf="editMode" (click)="actualizarPublicacion()">Actualizar</button>
  <button *ngIf="editMode" class="cancel" (click)="resetForm()">Cancelar</button>

</div>



<!-- ⭐ LISTA DE PUBLICACIONES ⭐ -->
<div class="publicaciones-list">

  <h2>Lista de Publicaciones</h2>

  <div *ngFor="let p of publicaciones" class="card">

    <h3>{{ p.titulo }}</h3>
    <p>{{ p.contenido }}</p>

    <p><strong>Autor:</strong> {{ p.autor }}</p>

    <div *ngIf="p.imagen">
      <img [src]="p.imagen" alt="Imagen" class="pub-img">
    </div>

    <div *ngIf="p.documento">
      <a [href]="p.documento" target="_blank">Ver documento</a>
    </div>

    <button (click)="habilitarEdicion(p)">Editar</button>
    <button (click)="eliminarPublicacion(p._id!)" class="delete-btn">
      Eliminar
    </button>

  </div>

</div>


<br>

<div class="cards">
  <div class="card" *ngFor="let p of publicaciones">
    <h3>{{ p.titulo }}</h3>
    <p>{{ p.contenido }}</p>
    <p><b>Autor:</b> {{ p.autor }}</p>

    <img *ngIf="p.imagen" [src]="p.imagen">

    <div class="actions">
      <button (click)="habilitarEdicion(p)">Editar</button>
      <button (click)="eliminarPublicacion(p._id!)">Eliminar</button>
    </div>
  </div>
</div>
